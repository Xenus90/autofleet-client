(this["webpackJsonpautofleet-client"]=this["webpackJsonpautofleet-client"]||[]).push([[0],{106:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),i=n(25),r=n.n(i),s=n(54),o=n(22),l=n.n(o),j=n(38),h=n(14),u=n(136),d=n(137),b=n(133),x=n(131),p=n(138),O=n(139),g=n(140),f=n(141),v=n(134),y=n(142),m=n.p+"static/media/logo.7b43f9ea.png",C=n(1),k=function(e){var t=e.isLoading,n=e.polygonPointsLength,c=e.vehicles,a=e.onFindVehicles,i=e.onClearPolygonPoints;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("img",{src:m,alt:"logo",style:{width:"90%",height:"auto"}}),Object(C.jsx)(d.a,{display:"flex",justifyContent:"center",my:2,children:Object(C.jsx)(p.a,{variant:"h5",children:"Controls"})}),t?Object(C.jsx)(d.a,{display:"flex",justifyContent:"center",alignItems:"center",children:Object(C.jsx)(O.a,{})}):Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(d.a,{children:Object(C.jsx)(p.a,{children:"Selected points: ".concat(n,"/4")})}),Object(C.jsxs)(d.a,{mt:2,display:"flex",justifyContent:"space-around",children:[Object(C.jsx)(g.a,{variant:"outlined",disabled:4!==n,onClick:a,children:"Find vehicles"}),Object(C.jsx)(g.a,{variant:"outlined",color:"error",onClick:i,children:"Delete polygon"})]}),Object(C.jsx)(d.a,{mt:2,children:Object(C.jsx)(p.a,{variant:"subtitle2",children:"*Right mouse click on polygon will delete it"})}),0===c.length?Object(C.jsx)(d.a,{mt:4,display:"flex",justifyContent:"center",children:Object(C.jsx)(p.a,{children:"No vehicles found"})}):Object(C.jsxs)(d.a,{children:[Object(C.jsx)(d.a,{mt:4,display:"flex",justifyContent:"center",children:Object(C.jsx)(p.a,{variant:"h6",children:"Found ".concat(c.length," vehicles")})}),Object(C.jsx)(d.a,{height:"75vh",overflow:"auto",children:Object(C.jsx)(f.a,{children:c.map((function(e,t){return Object(C.jsx)(v.a,{children:Object(C.jsx)(y.a,{primary:"Id: ".concat(e.id),secondary:"State: ".concat(e.state)})},t)}))})})]})]})]})},P=n(15),w=n(33),S=function(e){var t=e.message;return Object(C.jsx)(d.a,{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",children:Object(C.jsx)(p.a,{variant:"h2",children:t})})},F="https://autofleet-server.herokuapp.com",L="AIzaSyC1jmyJkkn8VkVhxiYKk7w4u3xBhSzpkCk",V=function(e){var t=e.vehicles,n=e.polygonPoints,c=e.setPolygonPoints,a=e.onClearPolygonPoints,i=Object(w.d)({googleMapsApiKey:L}),r=i.isLoaded;return i.loadError?Object(C.jsx)(S,{message:"Error loading map"}):r?Object(C.jsxs)(w.a,{mapContainerStyle:{width:"100%",height:"100%"},center:{lat:51.5194136,lng:-.1334216},zoom:12,options:{disableDefaultUI:!0,zoomControl:!0},onClick:function(e){if(n.length<4){var t=e.latLng,a=t.lat,i=t.lng;c((function(e){return[].concat(Object(P.a)(e),[{lat:a(),lng:i()}])}))}},children:[Object(C.jsx)(w.c,{paths:n,onRightClick:a}),n.map((function(e,t){return Object(C.jsx)(w.b,{position:{lat:e.lat,lng:e.lng}},t)})),t.map((function(e,t){return Object(C.jsx)(w.b,{position:{lat:e.location.lat,lng:e.location.lng}},t)}))]}):Object(C.jsx)(S,{message:"Loading maps"})},I=n(11),A=n(55),z=n.n(A),D=function e(){Object(I.a)(this,e)};D.getAllVehicles=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.get("".concat(F,"/vehicles"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),D.getVehiclesWithinArea=function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.post("".concat(F,"/vehicles"),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var E=function(){var e=Object(c.useState)(!1),t=Object(h.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)({isOpen:!1,text:"",severity:"success"}),r=Object(h.a)(i,2),o=r[0],p=r[1],O=Object(c.useState)([]),g=Object(h.a)(O,2),f=g[0],v=g[1],y=Object(c.useState)([]),m=Object(h.a)(y,2),P=m[0],w=m[1],S=function(){var e=Object(j.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(!0),t=f.map((function(e){return[e.lat,e.lng]})),e.next=5,D.getVehiclesWithinArea(t);case 5:n=e.sent,w(n.data.vehicles),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),p({isOpen:!0,text:"Failed to fetch data",severity:"error"});case 12:return e.prev=12,a(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})));return function(){return e.apply(this,arguments)}}(),F=function(){v([]),w([])},L=function(){p((function(e){return Object(s.a)(Object(s.a)({},e),{},{isOpen:!1})}))};return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)(u.a,{container:!0,children:[Object(C.jsx)(u.a,{item:!0,xs:3,children:Object(C.jsx)(d.a,{height:"98vh",children:Object(C.jsx)(k,{isLoading:n,polygonPointsLength:f.length,vehicles:P,onFindVehicles:S,onClearPolygonPoints:F})})}),Object(C.jsx)(u.a,{item:!0,xs:9,children:Object(C.jsx)(d.a,{height:"98vh",children:Object(C.jsx)(V,{vehicles:P,polygonPoints:f,setPolygonPoints:v,onClearPolygonPoints:F})})})]}),Object(C.jsx)(b.a,{open:o.isOpen,autoHideDuration:4e3,onClose:L,children:Object(C.jsx)(x.a,{severity:o.severity,sx:{width:"100%"},onClose:L,children:o.text})})]})};r.a.render(Object(C.jsx)(a.a.StrictMode,{children:Object(C.jsx)(E,{})}),document.getElementById("root"))}},[[106,1,2]]]);
//# sourceMappingURL=main.457010a3.chunk.js.map